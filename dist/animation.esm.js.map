{"version":3,"file":"animation.esm.js","sources":["../src/core/Bezier.ts","../src/core/animation.ts"],"sourcesContent":["/**\n * @description Bézier Curve\n */\nimport { Ipoint } from '@/common/interface';\n// import bezierEasing from 'bezier-easing';\n\nconst bezierEasing: Function = require('bezier-easing');\n\n// 3次贝塞尔曲线\nexport default class Bezier {\n    private t: number;\n    private p0: Ipoint;\n    private p1: Ipoint;\n    private p2: Ipoint;\n    private p3: Ipoint;\n\n    private bezierStr: string;\n    private easing: Function;\n\n    private center: Ipoint;\n    constructor(p1: Ipoint, p2: Ipoint) {\n        this.p0 = {\n            x: 0,\n            y: 0,\n        };\n        this.p3 = {\n            x: 1,\n            y: 1,\n        };\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.bezierStr = `${p1.x}, ${p1.y}, ${p2.x}, ${p2.y}`;\n        this.easing = bezierEasing(p1.x, p1.y, p2.x, p2.y);\n    }\n\n    public getPoint(t: number): Ipoint {\n        return {\n            x:\n                this.p0.x * Math.pow(1 - t, 3) +\n                this.p1.x * t * Math.pow(1 - t, 2) * 3 +\n                this.p2.x * Math.pow(t, 2) * (1 - t) * 3 +\n                this.p3.x * Math.pow(t, 3),\n            y:\n                this.p0.y * Math.pow(1 - t, 3) +\n                this.p1.y * t * Math.pow(1 - t, 2) * 3 +\n                this.p2.y * Math.pow(t, 2) * (1 - t) * 3 +\n                this.p3.y * Math.pow(t, 3),\n        };\n    }\n\n    public getYByTime(t: number): number {\n        return this.easing(t);\n    }\n}\n","/**\n * @description animation module\n */\n\nimport { Ipoint } from '@/common/interface';\nimport Bezier from '@/core/Bezier';\n\nexport default class Animation {\n    private begin: number;\n    private end: number;\n    private time: number;\n    private animationType: string;\n    private bezier: Bezier;\n\n    /**\n     *\n     * @param begin 初始value\n     * @param end 最终value\n     * @param time 持续时间\n     * @param animationType 运动类型 etc:ease-in ease-out\n     */\n    constructor(\n        begin: number,\n        end: number,\n        time: number,\n        animationType: string = 'liner',\n    ) {\n        this.begin = begin;\n        this.end = end;\n        this.time = time;\n        this.animationType = animationType;\n\n        this.getBazier();\n    }\n\n    public getValue(t: number): number {\n        return this.begin + (this.end - this.begin) * this.bezier.getYByTime(t);\n    }\n\n    public getList(framePerSecond: number = 60): number[] {\n        const list: number[] = [];\n        for (let i: number = 0; i <= framePerSecond * this.time; i = i + 1) {\n            list.push(this.getValue(i / (this.time * framePerSecond)));\n        }\n\n        return list;\n    }\n\n    private getBazier(): void {\n        let p1: Ipoint;\n        let p2: Ipoint;\n        switch (this.animationType) {\n            case 'liner':\n                p1 = {\n                    x: 0,\n                    y: 0,\n                };\n                p2 = {\n                    x: 1,\n                    y: 1,\n                };\n                break;\n            case 'ease':\n                p1 = {\n                    x: 0.25,\n                    y: 0.1,\n                };\n                p2 = {\n                    x: 0.25,\n                    y: 1,\n                };\n                break;\n            case 'ease-in':\n                p1 = {\n                    x: 0.42,\n                    y: 0,\n                };\n                p2 = {\n                    x: 1,\n                    y: 1,\n                };\n                break;\n            case 'ease-out':\n                p1 = {\n                    x: 0,\n                    y: 0,\n                };\n                p2 = {\n                    x: 0.58,\n                    y: 1,\n                };\n                break;\n            case 'ease-in-out':\n                p1 = {\n                    x: 0.42,\n                    y: 0,\n                };\n                p2 = {\n                    x: 0.58,\n                    y: 1,\n                };\n                break;\n            case 'in-back-out':\n                p1 = {\n                    x: 0.68,\n                    y: -0.55,\n                };\n                p2 = {\n                    x: 0.27,\n                    y: 1.55,\n                };\n                break;\n            default:\n                // point str\n                const strArr: string[] = this.animationType.split(',');\n                if (!strArr || strArr.length !== 4) {\n                    throw new Error('The animation type is not right');\n                }\n                p1 = {\n                    x: parseFloat(strArr[0]),\n                    y: parseFloat(strArr[1]),\n                };\n                p2 = {\n                    x: parseFloat(strArr[2]),\n                    y: parseFloat(strArr[3]),\n                };\n        }\n\n        this.bezier = new Bezier(p1, p2);\n    }\n}\n"],"names":["bezierEasing","require","p1","p2","p0","p3","bezierStr","x","y","easing","t","Math","pow","begin","end","time","animationType","getBazier","bezier","getYByTime","framePerSecond","list","i","push","getValue","strArr","split","length","Error","parseFloat","Bezier"],"mappings":"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"}