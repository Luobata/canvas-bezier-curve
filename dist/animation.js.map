{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ddf8ba48a32c260bbc64","webpack:///./src/entry.js","webpack:///./src/core/animation.ts","webpack:///./src/core/Bezier.ts","webpack:///./node_modules/bezier-easing/src/index.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__core_animation__","__WEBPACK_IMPORTED_MODULE_0__core_Bezier__","[object Object]","begin","end","time","animationType","getBazier","t","bezier","getYByTime","framePerSecond","list","push","getValue","p1","p2","x","y","strArr","split","length","Error","parseFloat","bezierEasing","p0","p3","bezierStr","easing","Math","pow","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","LinearEasing","mX1","mY1","mX2","mY2","sampleValues","Array","getTForX","aX","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","abs","binarySubdivide"],"mappings":"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","file":"animation.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"animation\"] = factory();\n\telse\n\t\troot[\"animation\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ddf8ba48a32c260bbc64","import core from '@/core/animation';\n\nexport default core;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry.js","/**\n * @description animation module\n */\n\nimport { Ipoint } from '@/common/interface';\nimport Bezier from '@/core/Bezier';\n\nexport default class Animation {\n    private begin: number;\n    private end: number;\n    private time: number;\n    private animationType: string;\n    private bezier: Bezier;\n\n    /**\n     *\n     * @param begin 初始value\n     * @param end 最终value\n     * @param time 持续时间\n     * @param animationType 运动类型 etc:ease-in ease-out\n     */\n    constructor(\n        begin: number,\n        end: number,\n        time: number,\n        animationType: string = 'liner',\n    ) {\n        this.begin = begin;\n        this.end = end;\n        this.time = time;\n        this.animationType = animationType;\n\n        this.getBazier();\n    }\n\n    public getValue(t: number): number {\n        return this.begin + (this.end - this.begin) * this.bezier.getYByTime(t);\n    }\n\n    public getList(framePerSecond: number = 60): number[] {\n        const list: number[] = [];\n        for (let i: number = 0; i <= framePerSecond * this.time; i = i + 1) {\n            list.push(this.getValue(i / (this.time * framePerSecond)));\n        }\n\n        return list;\n    }\n\n    private getBazier(): void {\n        let p1: Ipoint;\n        let p2: Ipoint;\n        switch (this.animationType) {\n            case 'liner':\n                p1 = {\n                    x: 0,\n                    y: 0,\n                };\n                p2 = {\n                    x: 1,\n                    y: 1,\n                };\n                break;\n            case 'ease':\n                p1 = {\n                    x: 0.25,\n                    y: 0.1,\n                };\n                p2 = {\n                    x: 0.25,\n                    y: 1,\n                };\n                break;\n            case 'ease-in':\n                p1 = {\n                    x: 0.42,\n                    y: 0,\n                };\n                p2 = {\n                    x: 1,\n                    y: 1,\n                };\n                break;\n            case 'ease-out':\n                p1 = {\n                    x: 0,\n                    y: 0,\n                };\n                p2 = {\n                    x: 0.58,\n                    y: 1,\n                };\n                break;\n            case 'ease-in-out':\n                p1 = {\n                    x: 0.42,\n                    y: 0,\n                };\n                p2 = {\n                    x: 0.58,\n                    y: 1,\n                };\n                break;\n            case 'in-back-out':\n                p1 = {\n                    x: 0.68,\n                    y: -0.55,\n                };\n                p2 = {\n                    x: 0.27,\n                    y: 1.55,\n                };\n                break;\n            default:\n                // point str\n                const strArr: string[] = this.animationType.split(',');\n                if (!strArr || strArr.length !== 4) {\n                    throw new Error('The animation type is not right');\n                }\n                p1 = {\n                    x: parseFloat(strArr[0]),\n                    y: parseFloat(strArr[1]),\n                };\n                p2 = {\n                    x: parseFloat(strArr[2]),\n                    y: parseFloat(strArr[3]),\n                };\n        }\n\n        this.bezier = new Bezier(p1, p2);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/animation.ts","/**\n * @description Bézier Curve\n */\nimport { Ipoint } from '@/common/interface';\n// import bezierEasing from 'bezier-easing';\n\nconst bezierEasing: Function = require('bezier-easing');\n\n// 3次贝塞尔曲线\nexport default class Bezier {\n    private t: number;\n    private p0: Ipoint;\n    private p1: Ipoint;\n    private p2: Ipoint;\n    private p3: Ipoint;\n\n    private bezierStr: string;\n    private easing: Function;\n\n    private center: Ipoint;\n    constructor(p1: Ipoint, p2: Ipoint) {\n        this.p0 = {\n            x: 0,\n            y: 0,\n        };\n        this.p3 = {\n            x: 1,\n            y: 1,\n        };\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.bezierStr = `${p1.x}, ${p1.y}, ${p2.x}, ${p2.y}`;\n        this.easing = bezierEasing(p1.x, p1.y, p2.x, p2.y);\n    }\n\n    public getPoint(t: number): Ipoint {\n        return {\n            x:\n                this.p0.x * Math.pow(1 - t, 3) +\n                this.p1.x * t * Math.pow(1 - t, 2) * 3 +\n                this.p2.x * Math.pow(t, 2) * (1 - t) * 3 +\n                this.p3.x * Math.pow(t, 3),\n            y:\n                this.p0.y * Math.pow(1 - t, 3) +\n                this.p1.y * t * Math.pow(1 - t, 2) * 3 +\n                this.p2.y * Math.pow(t, 2) * (1 - t) * 3 +\n                this.p3.y * Math.pow(t, 3),\n        };\n    }\n\n    public getYByTime(t: number): number {\n        return this.easing(t);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Bezier.ts","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bezier-easing/src/index.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}